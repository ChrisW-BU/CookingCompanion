@page "/recipes"
@inject CookCompAPI _api
@inject NavigationManager _nav

<PageTitle>Recipe Selection</PageTitle>
<h3>Recipes</h3>

<AlertItem Style="AlertItem.AlertStyle.Info">
    Please select a recipe from the list below to begin cooking
</AlertItem>

<FormBase>
    <ChildContent>
        @foreach (var r in recipes)
        {
            <RecipeCard Name="@r.Name" Description="@r.Description" ImgUrl="@r.ImgUrl"
                        Duration="@r.Duration"  OnClickCall="() => OnClickEvent(r.Id)" />
        }
    </ChildContent>
</FormBase>

<ButtonControl Colour="primary" Icon="far fa-arrow-circle-left" Name="Go Back" OnClickCall="PageBack" />

@code {
    protected List<Recipe> recipes = new List<Recipe>();

    protected override async Task OnInitializedAsync()
    {
        recipes = await _api.GetRecipeListAsync(10, 0);
        await base.OnInitializedAsync();
    }

    private void OnClickEvent(int recipeId)
    {
        //_nav.NavigateTo("/admin/edit_recipe/" + recipeId);
    }

    private void PageBack()
    {
        _nav.NavigateTo("/");
    }
}
